100xDev 
16-12-2023 WEEK3 
Middlewares?
Authentication?
Zod?


DRY - Do not repeat yourself
to create another route :
better soln - create wrapper funs 
ugly soln - create 
Ideal soln - Middlewares(centralizing the logic at one place and calling the middleware funs wherever needed)  - just create as many routes as needed
takes - (req, res , next)  as parameters , if all checks passed , next(); will be called to pass to the next function 

How do we define middleware?

app.get("/health-checkup", function(req, res, next){
  console.log("hi from req1");   //precheck before passing to next function 
  next();    //if ok passing to next 
}, function (req, res){
  console.log("hi from req2");
});

//function1 and function 2 are like middlewares i.e, wrapper functions 


app.use(express.json())    - to pass the middlwARE to the function explicitly , i.e, mounting middleware in the functions    
--------------------------------------------------------------------------------------------

Global catches ::

error middle ware : global catches helps user a better error message
app.use(function(err, req, res, next){
    error.count++;
    res.json({  
          message:  "something went wrong";
}
----------------------------------------------------------------------------------------------

Authentication:
Input Validations :

How can we do better input validation? " ZOD"  - Input validation Library   - First Schema Validation 

How to install zod:  npm install zod

How to use Zod?  tell schema -> give input -> it will log true or false based on the validation 

//define the schema    

const schema = zod.array(zod.number());

//import zod
const zod = require("zod");
    
//parsing the user input  {validation} 
//validate 

const response = schema.safeParse( kidneys  )  

examples :
function validateinput(){
const schema = z.object({
    email: z.string().email(),       //we can use some primitve types in the library :: check documentation 
    password: z.string().min(5)
})

const response = schema.safeParse(obj);
console.log(response);
}

validateinput({
   email: "bvbamsi@gmail.com",
   password: "akjdhbfb"
});
}


-------------------------------
In http call :
app.post("/login" , function(req, res){
    const response



